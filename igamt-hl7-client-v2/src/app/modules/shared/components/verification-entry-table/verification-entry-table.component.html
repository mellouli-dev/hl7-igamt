<div *ngIf="verification$ | async as verification" class="table-container">
  <span *ngIf="verification.entries.length === 0" style="color: gray;">No entries.</span>
  <div *ngIf="filter | async as filterValue" style="display: flex;">
    <ng-container *ngFor="let item of severity">
      <div class="severity-filter" *ngIf="verification.stats[item.key]">
        <p-checkbox [style]="{ 'margin-right' : '5px'}" [(ngModel)]="filterValue.severity[item.key]" (ngModelChange)="updateFilter()" binary="true"></p-checkbox>
        <app-issue-badge [type]="item.type" [number]="verification.stats[item.key]" label="true"></app-issue-badge>
      </div>
    </ng-container>
  </div>
  <div style="overflow: scroll; margin-top: 15px; border-top: 1px solid lightgray; border-bottom: 1px solid lightgray">
    <table class="table table-sm table-bordered table-striped">
      <ng-container *ngFor="let item of verification.entries">
        <tbody *ngIf="item.entries?.length">
          <tr style="background-color: white;">
            <th colspan="3">
              <app-display-ref [element]="item.target" [documentId]="documentId" documentType="IGDOCUMENT"></app-display-ref>
            </th>
          </tr>
          <tr>
            <th>Location</th>
            <th>Property</th>
            <th>Message</th>
          </tr>
          <tr *ngFor="let entry of item.entries">
            <td>
              <app-issue-badge [ngbPopover]="entry.code" triggers="mouseenter:mouseleave" [type]="entry.severity"></app-issue-badge>
              <span style="margin-left: 5px;"> {{entry.location}} </span>
            </td>
            <td>{{entry.property}}</td>
            <td>{{entry.message}}</td>
          </tr>
        </tbody>
      </ng-container>
    </table>
  </div>
</div>
